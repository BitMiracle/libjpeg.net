<?xml version="1.0" encoding="UTF-8"?>
<xml>
  <file>
    <title>Special color spaces</title>
    <breadcumbs>
      <link file="..\Knowledge_base.xml">
        <text>Knowledge base</text>
      </link>
      <text> :: </text>
      <link file="..\Classic_LibJpeg.xml">
        <text>Classic LibJpeg</text>
      </link>
    </breadcumbs>
    <descriptionarticle only="true">
      <p>
        <text>The JPEG standard itself is "color blind" and doesn't specify any particular color space. It is customary to convert color data to a luminance/chrominance color space before compressing, since this permits greater compression. The existing de-facto JPEG file format standards specify YCbCr or grayscale data (JFIF), or grayscale, RGB, YCbCr, CMYK, or YCCK (Adobe). For special applications such as multispectral images, other color spaces can be used, but it must be understood that such files will be unportable.</text> <br /><br /><text>The JPEG library can handle the most common colorspace conversions (namely RGB &lt;=&gt; YCbCr and CMYK &lt;=&gt; YCCK). It can also deal with data of an unknown color space, passing it through without conversion. If you deal extensively with an unusual color space, you can easily extend the library to understand additional color spaces and perform appropriate conversions.</text> <br /><br /><text>For compression, the source data's color space is specified by property </text> <link file="..\jpeg_compress_struct.In_color_space.xml"><text>In_color_space</text> </link><text>. This is transformed to the JPEG file's color space given by </text> <link file="..\jpeg_compress_struct.Jpeg_color_space.xml"><text>Jpeg_color_space</text> </link><text>. </text> <link file="..\jpeg_compress_struct.jpeg_set_defaults.xml"><text>jpeg_set_defaults</text> </link><text>() chooses a reasonable JPEG color space depending on In_color_space, but you can override this by calling </text> <link file="..\jpeg_compress_struct.jpeg_set_colorspace.xml"><text>jpeg_set_colorspace</text> </link><text>(). Of course you may select a supported transformation.</text> </p>
      <p>
        <text>The following transformations are currently supported:</text> <br /><text>RGB =&gt; YCbCr</text> <br /><text>RGB =&gt; GRAYSCALE</text> <br /><text>YCbCr =&gt; GRAYSCALE</text> <br /><text>CMYK =&gt; YCCK</text> <br /><text>plus the null transforms: GRAYSCALE =&gt; GRAYSCALE, RGB =&gt; RGB, YCbCr =&gt; YCbCr, CMYK =&gt; CMYK, YCCK =&gt; YCCK, and UNKNOWN =&gt; UNKNOWN.</text> <br /><br /><text>The de-facto file format standards (JFIF and Adobe) specify APPn markers that indicate the color space of the JPEG file. It is important to ensure that these are written correctly, or omitted if the JPEG file's color space is not one of the ones supported by the de-facto standards. </text> <link file="..\jpeg_compress_struct.jpeg_set_colorspace.xml"><text>jpeg_set_colorspace</text> </link><text>() will set the compression parameters to include or omit the APPn markers properly, so long as it is told the truth about the JPEG color space.</text> <br /><text>For example, if you are writing some random 3-component color space without conversion, don't try to fake out the library by setting </text> <link file="..\jpeg_compress_struct.In_color_space.xml"><text>In_color_space</text> </link><text> and </text> <link file="..\jpeg_compress_struct.Jpeg_color_space.xml"><text>Jpeg_color_space</text> </link><text> to JCS_YCbCr; use JCS_UNKNOWN. You may want to write an APPn marker of your own devising to identify the colorspace - see "</text> <link file="Special_markers.xml"><text>Special markers</text> </link><text>".</text> <br /><br /><text>For decompression, the JPEG file's color space is given in </text> <link file="..\jpeg_decompress_struct.Jpeg_color_space.xml"><text>Jpeg_color_space</text> </link><text>, and this is transformed to the output color space </text> <link file="..\jpeg_decompress_struct.Out_color_space.xml"><text>Out_color_space</text> </link><text>.</text> <br /><link file="..\jpeg_decompress_struct.jpeg_read_header.xml"><text>jpeg_read_header</text> </link><text>'s setting of Jpeg_color_space can be relied on if the file conforms to JFIF or Adobe conventions, but otherwise it is no better than a guess. If you know the JPEG file's color space for certain, you can override jpeg_read_header's guess by setting Jpeg_color_space. jpeg_read_header also selects a default output color space based on (its guess of) Jpeg_color_space; set Out_color_space to override this. Again, you must select a supported transformation. </text> </p>
      <p>
        <text>The following transformations are currently supported:</text> <br /><text>YCbCr =&gt; GRAYSCALE</text> <br /><text>YCbCr =&gt; RGB</text> <br /><text>GRAYSCALE =&gt; RGB</text> <br /><text>YCCK =&gt; CMYK</text> <br /><text>as well as the null transforms. (Since GRAYSCALE=&gt;RGB is provided, an application can force grayscale JPEGs to look like color JPEGs if it only wants to handle one case.)</text> <br /><br /><text>The two-pass color quantizer is specialized to handle RGB data (it weights distances appropriately for RGB colors). You'll need to modify the code if you want to use it for non-RGB output color spaces.</text> </p>
    </descriptionarticle>
  </file>
</xml>